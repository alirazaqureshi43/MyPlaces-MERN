import{r as x,A as v,u as f,j as e,a as j}from"./index-BBY7Hu33.js";import{u as I,I as r,V as i,a as g}from"./form-hook-DJIKuCCT.js";/* empty css                  */import{u as h,E as A,B as T}from"./http-hook-BaJhmCFA.js";import{I as E}from"./ImageUpload-B02z8MMy.js";function R(){const{isLoading:n,error:l,sendRequest:o,clearError:d}=h(),p=x.useContext(v),u=f(),[t,s]=I({inputs:{title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},image:{value:null,isValid:!1}}},!1),c=async m=>{m.preventDefault();try{const a=new FormData;a.append("title",t.inputs.title.value),a.append("description",t.inputs.description.value),a.append("address",t.inputs.address.value),a.append("image",t.inputs.image.value),await o("http://localhost:5000/api/places","POST",a,{Authorization:`Bearer ${p.token}`}),u("/")}catch{}};return e.jsxs(e.Fragment,{children:[e.jsx(A,{error:l,onClear:d}),n&&e.jsx("div",{className:"center",children:e.jsx(j,{asOverlay:!0})}),e.jsxs("form",{action:"",className:"place-form",onSubmit:c,children:[e.jsx(r,{id:"title",type:"text",label:"Title",element:"input",errorText:"Please enter a valid title.",validators:[i()],onInput:s}),e.jsx(r,{id:"description",label:"Description",element:"textarea",errorText:"Please enter a valid description (at least 5 characters)",validators:[g(5)],onInput:s}),e.jsx(r,{id:"address",label:"Address",element:"input",errorText:"Please enter a valid address",validators:[i()],onInput:s}),e.jsx(E,{id:"image",onInput:s,errorText:"Please provide an image"}),e.jsx(T,{type:"submit",children:"Add Place"})]})]})}export{R as default};
