import{b as j,u as V,r as l,A as I,j as e,a as P}from"./index-BBY7Hu33.js";import{u as y,I as m,V as A,a as C}from"./form-hook-DJIKuCCT.js";import{u as E,E as b,B as T}from"./http-hook-BaJhmCFA.js";import{C as N}from"./Card-QDGsE82P.js";/* empty css                  */const H=()=>{const i=j().placeId,x=V(),r=l.useContext(I),{isLoading:n,error:o,sendRequest:s,clearError:f}=E(),[c,h]=l.useState([]),[t,p,d]=y({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);l.useEffect(()=>{(async()=>{try{const a=await s(`http://localhost:5000/api/places/${i}`);h(a.place),d({title:{value:a.place.title,isValid:!0},description:{value:a.place.description,isValid:!0}},!0)}catch{}})()},[s,i,d]);const v=async u=>{u.preventDefault();const a={title:t.inputs.title.value,description:t.inputs.description.value};try{await s(`http://localhost:5000/api/places/${i}`,"PATCH",JSON.stringify(a),{"Content-Type":"application/json",Authorization:`Bearer ${r.token}`}),x("/"+r.userId+"/places")}catch{}};return n?e.jsx("div",{className:"center",children:e.jsx(P,{})}):!c&&!o?e.jsx("div",{className:"center",children:e.jsx(N,{children:e.jsx("h2",{children:"Could not find place!"})})}):e.jsxs(e.Fragment,{children:[e.jsx(b,{error:o,onClear:f}),!n&&c&&e.jsxs("form",{className:"place-form",onSubmit:v,children:[e.jsx(m,{id:"title",element:"input",type:"text",label:"Title",validators:[A()],errorText:"Please enter a valid title.",onInput:p,initialValue:t.inputs.title.value,initialValid:t.inputs.title.isValid}),e.jsx(m,{id:"description",label:"Description",element:"textarea",errorText:"Please enter a valid description (at least 5 characters)",validators:[C(5)],initialValue:t.inputs.description.value,initialValid:t.inputs.description.isValid,onInput:p}),e.jsx(T,{type:"submit",disabled:!t.isValid,children:"Add Place"})]})]})};export{H as default};
