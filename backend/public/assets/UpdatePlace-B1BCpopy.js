import{b as j,u as V,r,A as y,j as e,a as I}from"./index-DAs0rZAi.js";import{u as b,I as m,V as P,a as A}from"./form-hook-DEVisYxr.js";import{u as C,E,B as T}from"./http-hook-iPg4NjC-.js";import{C as N}from"./Card-3b1735Y7.js";/* empty css                  */const L=()=>{const i=j().placeId,x=V(),l=r.useContext(y),{isLoading:n,error:c,sendRequest:s,clearError:f}=C(),[o,h]=r.useState([]),[t,p,d]=b({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);r.useEffect(()=>{(async()=>{try{const a=await s(`https://my-place-backend-168epwqz4-alirazaqureshi43s-projects.vercel.app/api/places/${i}`);h(a.place),d({title:{value:a.place.title,isValid:!0},description:{value:a.place.description,isValid:!0}},!0)}catch{}})()},[s,i,d]);const v=async u=>{u.preventDefault();const a={title:t.inputs.title.value,description:t.inputs.description.value};try{await s(`https://my-place-backend-168epwqz4-alirazaqureshi43s-projects.vercel.app/api/places/${i}`,"PATCH",JSON.stringify(a),{"Content-Type":"application/json",Authorization:`Bearer ${l.token}`}),x("/"+l.userId+"/places")}catch{}};return n?e.jsx("div",{className:"center",children:e.jsx(I,{})}):!o&&!c?e.jsx("div",{className:"center",children:e.jsx(N,{children:e.jsx("h2",{children:"Could not find place!"})})}):e.jsxs(e.Fragment,{children:[e.jsx(E,{error:c,onClear:f}),!n&&o&&e.jsxs("form",{className:"place-form",onSubmit:v,children:[e.jsx(m,{id:"title",element:"input",type:"text",label:"Title",validators:[P()],errorText:"Please enter a valid title.",onInput:p,initialValue:t.inputs.title.value,initialValid:t.inputs.title.isValid}),e.jsx(m,{id:"description",label:"Description",element:"textarea",errorText:"Please enter a valid description (at least 5 characters)",validators:[A(5)],initialValue:t.inputs.description.value,initialValid:t.inputs.description.isValid,onInput:p}),e.jsx(T,{type:"submit",disabled:!t.isValid,children:"Add Place"})]})]})};export{L as default};
