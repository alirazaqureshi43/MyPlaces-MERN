import{r as u,j as a}from"./index-DAs0rZAi.js";const A="REQUIRE",I="MINLENGTH",V="MAXLENGTH",f="MIN",p="MAX",E="EMAIL",_=()=>({type:A}),y=e=>({type:I,val:e}),L=()=>({type:E}),h=(e,t)=>{let i=!0;for(const s of t)s.type===A&&(i=i&&e.trim().length>0),s.type===I&&(i=i&&e.trim().length>=s.val),s.type===V&&(i=i&&e.trim().length<=s.val),s.type===f&&(i=i&&+e>=s.val),s.type===p&&(i=i&&+e<=s.val),s.type===E&&(i=i&&/^\S+@\S+\.\S+$/.test(e));return i},v=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.val,isValid:h(t.val,t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}},N=e=>{const[t,i]=u.useReducer(v,{value:e.initialValue||"",isValid:e.initialValid||!1,isTouched:!1}),s=T=>{i({type:"CHANGE",val:T.target.value,validators:e.validators})},r=T=>{i({type:"TOUCH"})},o=e.element==="input"?a.jsx("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:s,onBlur:r,value:t.value}):a.jsx("textarea",{id:e.id,rows:e.rows||3,onChange:s,onBlur:r,value:t.value}),{id:l,onInput:n}=e,{isValid:d,value:c}=t;return u.useEffect(()=>{n(l,c,d)},[l,c,d,n]),a.jsxs("div",{className:`form-control ${!t.isValid&&t.isTouched&&"form-control--invalid"}`,children:[a.jsx("label",{htmlFor:e.id,children:e.label}),o,!t.isValid&&t.isTouched&&a.jsx("p",{children:e.errorText})]})},R=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let i=!0;for(const s in e.inputs)e.inputs[s]&&(s===t.inputId?i=i&&t.isValid:i=i&&e.inputs[s].isValid);return{...e,inputs:{...e.inputs,[t.inputId]:{value:t.value,isValid:t.isValid}},isValid:i};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},H=(e,t)=>{const[i,s]=u.useReducer(R,{inputs:e,isValid:t}),r=u.useCallback((l,n,d)=>{s({type:"INPUT_CHANGE",value:n,isValid:d,inputId:l})},[]),o=u.useCallback((l,n)=>{s({type:"SET_DATA",inputs:l,formIsValid:n})},[]);return[i,r,o]};export{N as I,_ as V,y as a,L as b,H as u};
